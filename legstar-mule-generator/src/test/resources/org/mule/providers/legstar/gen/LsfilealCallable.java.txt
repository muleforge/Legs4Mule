package org.mule.providers.legstar.test.lsfileal;
import org.mule.providers.legstar.cixs.AbstractAdapterCallable;
import org.mule.providers.legstar.cixs.MuleCixsException;
import org.mule.providers.legstar.cixs.MuleHostHeader;

import com.legstar.coxb.transform.HostTransformException;
import com.legstar.host.invoke.HostInvokerException;

import com.legstar.test.coxb.lsfileal.RequestParms;

/**
 * LegStar/Mule Callable Invoker implementation.
 * Each method maps to a mainframe program. 
 * 
 * This class was generated by LegStar Mule Component generator.
 */
public class LsfilealCallable extends AbstractAdapterCallable {

    /** Name of this action adapter implementation. */
    private static final String  ACTION_ADAPTER_NAME = "lsfileal";

    /** Invoker implementation for operation lsfileae. */
    private LsfilealProgramInvoker mLsfilealProgramInvoker;

    /**
    * Standard constructor.
    */
    public LsfilealCallable() {
        super(ACTION_ADAPTER_NAME);
        mLsfilealProgramInvoker = new LsfilealProgramInvoker(getLegStarConfigFileName());
    }

    /**
     * Synchronous execution of mainframe programs.
     * <p/>
     * @param request the request java type that will be converted to mainframe
     *  format before it is sent over the wire.
     * @param hostHeader mainframe addressing parameters
     * @return the reply java type inferred from the mainframe program output
     * @throws MuleCixsException signals problems running mainframe program
     */
    public Object call(
          final Object request,
          final MuleHostHeader hostHeader) throws MuleCixsException {
        try {

            if (request instanceof RequestParms) {
                return getLsfilealProgramInvoker().lsfileal(
                        hostHeader.getAddress(),
                        getRequestID(hostHeader),
                        (RequestParms) request);
            }
    
            throw new MuleCixsException(
                    "Request object of class "
                    + request.getClass().getName() + " is not supported");
        } catch (HostInvokerException e) {
            throw new MuleCixsException(e);
        } catch (HostTransformException e) {
            throw new MuleCixsException(e);
        }
    }

    /**
     * @return the invoker implementation for operation lsfileal
     */
    public LsfilealProgramInvoker getLsfilealProgramInvoker() {
        return mLsfilealProgramInvoker;
    }

    /**
     * @param programInvoker the invoker implementation for operation lsfileal to set
     */
    public void setLsfilealProgramInvoker(
            final LsfilealProgramInvoker programInvoker) {
        mLsfilealProgramInvoker = programInvoker;
    }

}
